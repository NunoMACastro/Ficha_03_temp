<!DOCTYPE html>
<html lang="pt">
    <head>
        <%- include("partials/_head") %>
    </head>
    <body>
        <%- include("partials/_header") %>

        <div class="container my-5">
            <div class="row">
                <div class="col-md-4 text-center">
                    <img
                        src="<%= personagem.imagem %>"
                        class="img-fluid rounded"
                        alt="<%= personagem.nome %>"
                        style="max-height: 400px"
                    />
                </div>
                <div class="col-md-8">
                    <h2><%= personagem.nome %></h2>
                    <p><strong>Tipo:</strong> <%= personagem.tipo %></p>
                    <p>
                        <strong>Descrição:</strong> <%= personagem.descricao %>
                    </p>
                    <div class="progress mb-2" style="height: 20px">
                        <div
                            class="progress-bar <%= personagem.tipo === 'Herói' ? 'bg-primary bar-w' : 'bg-danger bar-w' %>"
                            role="progressbar"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            aria-valuenow="<%= (Number(personagem.rating) * 20).toFixed(0) %>"
                            style="
                                --w: <%= (Number(personagem.rating) * 20)
                                    .toFixed(0) %>%;
                            "
                        >
                            <%= Number(personagem.rating).toFixed(1) %>/5
                        </div>
                    </div>
                </div>
            </div>

            <hr class="my-4" />

            <h4>Resultados dos Combates</h4>
            <ul class="list-group list-group-flush">
                <% resultados.forEach(r => { %>
                <li
                    class="list-group-item d-flex justify-content-between align-items-center"
                >
                    <div>
                        <a
                            href="/detalhes/<%= r.id %>"
                            class="text-decoration-none text-dark"
                        >
                            <img
                                src="<%= r.imagem %>"
                                alt="<%= r.nome %>"
                                width="40"
                                class="rounded me-2"
                            />
                            <strong><%= r.nome %></strong> (<%= r.tipo %>) —
                            Rating: <%= r.rating.toFixed(1) %>
                        </a>
                    </div>
                    <span class="text-muted"><%= r.resultado %></span>
                </li>
                <% }) %>
            </ul>
        </div>

        <%- include("partials/_footer") %>
    </body>
</html>
